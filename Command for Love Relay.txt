创建loverelay的操作步骤（win10环境）

一、搭建虚拟环境
1、先安装virtualenv包
pip install --user virtualenv

2、切换到LoveRelay目录，创建一个虚拟环境
cd C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay
python C:\Users\Administrator\AppData\Roaming\Python\Python36\site-packages\virtualenv.py loverelay

3、激活虚拟环境
C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay\loverelay\Scripts\activate

4、安装Django
pip install Django


二、创建项目
5、创建loverelay项目
django-admin.py startproject loverelay .

6、mysql中创建一个数据库loverelay

7、安装mysql client
pip install mysqlclient

8、迁移第一批数据到数据库
python manage.py migrate
这个命令执行完后，会发现mysql数据库中多了一堆表，有些是空的

9、运行服务，以检查是否创建了项目
cmd
cd C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay
C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay\loverelay\Scripts\activate
python manage.py runserver
另打开一个dos窗口，进入shell，交互命令，以方便检查数据
cd C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay
C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay\loverelay\Scripts\activate
python manage.py shell

三、开始建应用程序
10、创建应用程序
python manage.py startapp lr

11、创建模型
在models.py中定义各个class，它们代表不同的数据库中的表，以及表之间的关系
见LoveRelay\lr\models.py

12、在settings.py中登记app lr

13、把models中定义的表同步到数据库中
要先进入虚拟环境
cd C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay
C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay\loverelay\Scripts\activate
python manage.py makemigrations lr
python manage.py migrate

14、为lr创建超级用户
python manage.py createsuperuser
username:lr_admin
password:bdf@1234

15、向管理网站注册模型
修改admin.py，import models里面的各个表
register(表）

16、安装django-bootstrap3
在虚拟环境下执行命令：
pip install django-bootstrap3

17、在settings.py中添加django-bootstrap3 (p212)

18、用bootstrap3美化页面

四、代码上传到github
19、安装github for windows
https://git-scm.com/download/win
运行git bash

20、初始化一个project
cd /C/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay
git init
git
git commit -m "initialize Love Relay"
网站上建项目Love Relay
(第一往网站推文件，需要添加ssh key），参见：
https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001374385852170d9c7adf13c30429b9660d0eb689dd43a000

21、同步文件到服务器
cd /C/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay
git add .
git commit -m "updated "
git push lr master

五、安装Apache服务器
22、下载apache2.4
http://www.apachelounge.com/download/

23、直接解压上面下载的zip文件，放c:\Apach24。在环境变量中增加path c:\apache24\bin

24、修改c:\apache24\conf\httpd.conf，按如下内容改：
ServerRoot "c:/Apache24"
Listen 127.0.0.1:8081
ServerName www.example.com:8081
DocumentRoot "c:/Apache24/htdocs"
<Directory "c:/Apache24/htdocs">
#下面这几行是添加进去的，放在所有LoadModule...之后
LoadFile "c:/python/python36.dll"
LoadModule wsgi_module "c:/python/lib/site-packages/mod_wsgi/server/mod_wsgi.cp36-win_amd64.pyd"
#项目的wsgi.py配置文件路径  
WSGIScriptAlias / C:/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay/loverelay/wsgi.py
WSGIPythonHome C:/Python
#项目路径  
WSGIPythonPath C:/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay
<Directory C:/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay/loverelay>
<Files wsgi.py>
    Require all granted
</Files>
</Directory>

25、在IE中试一下
http://127.0.0.1:8081/index.html
如果出现It works!证明apache配置成功。

26、安装mod_wsgi
pip install wheel
下载一个mod_wsgi，注意python、apache的版本和win32/64位的选择
http://www.lfd.uci.edu/~gohlke/pythonlibs/#mod_wsgi
把下载的whl文件放c:\temp
pip install c:\temp\???.whl(指whl文件全名)

27、配置apache24, mod_wsgi, django项目
打开C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay\loverelay\wsgi.py
添加
import sys
sys.path.append('C:/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay/')
sys.path.append('C:/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay/loverelay/')
sys.path.append('C:/Users/Administrator/Documents/Files/ITL/Python/python_work/LoveRelay/loverelay/lib/site-packages/')

28、启动web服务
cmd
httpd -k start
检查c:\apache24\logs\error.log，看服务启动有无报错

29、IE运行
http://127.0.0.1:8081/admin



python自带的命令建一个web服务器：
DOS方式
进到想作为web服务根目录的目录下
python -m http.server --cgi 8080
http://localhost:8080/或http://127.0.0.1:8080/都可以


git remote add lr git@github.com:HansWan/LoveRelay.git
git pull lr master --allow-unrelated-histories
git push -u lr master
git push --set-upstream lr master
git remote -v



cd C:\Users\Administrator\Documents\Files\ITL\Python\python_work\LoveRelay

ll_env\Scripts\activate

python manage.py makemigrations learning_logs
python manage.py migrate

django-admin.py startproject learning_log .
python manage.py startapp learning_logs

python manage.py runserver